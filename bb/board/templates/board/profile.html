<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ profile_user.username }}のページ</title>
</head>
<body>
    <h1>{{ profile_user.username }}さんのページ</h1>
    <p>登録日: {{ profile_user.date_joined }}</p>

    <h2>投稿一覧</h2>
    <ul>
        {% for post in posts %}
            <li>
                <strong>{{ post.content }}</strong><br>
                <small>投稿日: {{ post.created_at }}</small>
            </li>
        {% empty %}
            <p>投稿がありません。</p>
        {% endfor %}
    </ul>

    <a href="{% url 'post_list' %}">投稿一覧に戻る</a>
</body>
</html>




<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <title>SNSデモ</title>

<script>
    document.addEventListener("copy", function() {
  window.alert("コピーしたよ");
});
</script>


    <style>

        body {
            margin: 0;
            font-family: Arial, sans-serif;
            display: flex;
            height: 100vh;
            color: white;
  
            flex-direction: row;
        }


        a {
    text-decoration: none; /* 下線を消す */
    color: inherit; /* 親要素の色を継承 */
}

a:hover,
a:visited,
a:active {
    text-decoration: none; 
    color: inherit; 
}

/* REPRY */
.form-container {
    display: none; 
    margin-top: 10px;
    background-color: #27292b;
    padding: 10px;
    border-radius: 5px;
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
}

.form-container textarea {
    width: 100%;
    padding: 10px;
    margin-bottom: 10px;
    border: 1px solid #ccc;
    border-radius: 5px;
    resize: none;
}

.form-container button {
    background-color: #7289da;
    color: white;
    border: none;
    padding: 10px 20px;
    border-radius: 5px;
    cursor: pointer;
}

.form-container button:hover {
    background-color: #5b6eae;
}


.reply {
    margin-top: 10px;
    padding: 5px;
    background-color: #1e1e1e;
    border-radius: 5px;
}


        .logout {
    position: absolute;

    z-index: 101;
    margin-left: 60%;
}


.username {
    position: absolute;
    z-index: 101;
    left : 80%;
}




        .Area {
  
  position: fixed;
 z-index: 100; 
 top: 90%;
  left: 68%;
}

.submit {
    position: fixed;
 z-index: 100; 
 top: 90%;
  left: 80%;
}

        .sidebar {
            position: fixed;
            top: 50px;
            right: 0;

          height: calc(100vh - 50px); 
            width: 15%;
            background-color: 	#121214;
            display: flex;
            flex-direction: column;
            padding: 15px;
            z-index: 10;

            
        }

        .message {
            width: 60%;         /* 親要素の50%の幅を確保 */
            margin: 0 auto; 
           text-align: center;
           padding: 0.2em 0.5em;

    background: #27292b;
    box-shadow: 0px 0px 0px 10px #27292b;


       }

       .message p {
    margin: 0; 
    padding: 0;
}


               .time {
           text-align: center;
           margin-bottom: 4%;
       }

        .channel {
            margin-bottom: 10px;
            cursor: pointer;
        }
        .channel:hover {
            background-color: #7289da;
            padding: 5px;
        }

        .header {
            height: 50px;
            width: 100%;
    
            background-color: #23272a;
            display: flex;
            align-items: center;
            left: 0;
            padding: 0 20px;
            z-index: 10; 
            position: fixed;
        }

        

        .chat-area {
            margin-top: 50px;
            flex: 1;
                    
            background-color: #1A1A1E;
            padding: 20px;
            overflow-y: auto;
        }
        .main-content {
        flex-direction: column;
    }

            .main-content {
            flex: 1;
            display: flex;
            flex-direction: column;
            background-color: #1A1A1E;
        }




          /*     background-color: #36393f;
        .message:hover {
            background-color: 	#121214;
            padding: 5px;
        }　*/


        .title {
            font-size: large;
            margin-left: 250px;
        }

        .left-side {
            position: fixed;
            top: 50px;
            left: 0;

            height: calc(100vh - 50px); 
            width: 15%;
            background-color: 	#121214;
            display: flex;
            flex-direction: column;
            padding: 15px;
            z-index: 10;

        }

        .buzz {

            height: calc(100vh - 50px); 
            border-radius: 6px; 

    background: #393A41;     
    position: fixed; 
    top: 60%;
    right: 1%;
    left: 84%;
    padding: 15px; 
  
    color: rgb(38, 137, 170); 
    margin-bottom: 60px; 
}


.buzzTx {
    margin-bottom: 30px;
    background-color: 	#393A41;
}
        
/* 位置を固定 
.Toukou {
    position: relative;
    z-index: 100; 
    margin-top: 46%;
   right: 50%;
    }
    */
.A{
     /* 必要に応じてrelativeにする */
     position: fixed;
    z-index: 100; 
    top: 90%;
left: 40%;
}




        @media (max-width: 768px) {
    .sidebar {
        width: 100%; /* モバイルでは全幅を使用 */
        height: auto;
        position: relative;
    }



    .KA {
        position: fixed;
        top: 80%;
        left: 50%;
    }


    .A, .B, .C {
    text-align: center;
 


    
}


/* 
    .main-content {
        flex-direction: column;
    }

            .main-content {
            flex: 1;
            display: flex;
            flex-direction: column;
        }
        .chat-area {
            margin-top: 50px;
            flex: 1;
                    
                    background-color: #1A1A1E;
            padding: 20px;
            overflow-y: auto;

            
    
        }

        .message {
            margin-bottom: 10px;
            margin-left: 550px;
        }

    */




.post-form button {
    align-self: flex-end;
    padding: 10px 20px;
    background-color: #7289da;
    color: white;
    border: none;
    border-radius: 5px;
    cursor: pointer;
}

.post-form button:hover {
    background-color: #5b6eae;
}

}


    </style>


<script>
    document.addEventListener('DOMContentLoaded', function () {
        const likeButtons = document.querySelectorAll('.like-btn');
        likeButtons.forEach(button => {
            button.addEventListener('click', function () {
                const postId = this.dataset.postId;
                fetch(`/post/${postId}/like/`, {
                    method: 'POST',
                    headers: {
                        'X-CSRFToken': '{{ csrf_token }}',
                    },
                })
                .then(response => response.json())
                .then(data => {
                    if (data.liked) {
                        this.textContent = '取り消す';
                    } else {
                        this.textContent = 'いいね';
                    }
                    this.nextElementSibling.textContent = `${data.like_count}`;
                });
            });
        });
    });


    document.addEventListener('DOMContentLoaded', function () {
        const postItems = document.querySelectorAll('.post-item');
        postItems.forEach(item => {
            item.addEventListener('click', function () {
                const postId = this.dataset.postId; // data-post-id属性から投稿IDを取得
                window.location.href = `/detail/${postId}/`; // 詳細ページに遷移
            });
        });
});


document.addEventListener('DOMContentLoaded', function () {
    const buttons = document.querySelectorAll('.showFormButton');
    buttons.forEach(button => {
        button.addEventListener('click', function () {
            const formContainer = this.nextElementSibling; // ボタンの次の要素を取得
            if (formContainer.style.display === 'none' || formContainer.style.display === '') {
                formContainer.style.display = 'block'; // フォームを表示
                this.textContent = "返信を閉じる";
            } else {
                formContainer.style.display = 'none'; // フォームを隠す
                this.textContent = "返信を表示";
              
            }
        });
    });
});



document.addEventListener('DOMContentLoaded', function () {
    const replyForms = document.querySelectorAll('.reply-form');
    replyForms.forEach(form => {
        form.addEventListener('submit', function (e) {
            e.preventDefault(); 

            const postId = this.dataset.postId;
            const content = this.querySelector('textarea[name="content"]').value;
            const csrfToken = this.querySelector('input[name="csrfmiddlewaretoken"]').value;

            fetch(`/post/${postId}/reply/`, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/x-www-form-urlencoded',
                    'X-CSRFToken': csrfToken
                },
                body: new URLSearchParams({ content: content })
            })
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    const repliesContainer = this.nextElementSibling; // 返信一覧のコンテナ
                    const newReply = document.createElement('div');
                    newReply.classList.add('reply');
                    newReply.innerHTML = `
                        <strong>${data.reply.user}</strong>: ${data.reply.content}<br>
                        <small>${data.reply.created_at}</small><br><br>
                    `;
                    repliesContainer.appendChild(newReply); // 新しい返信を追加
                    this.querySelector('textarea[name="content"]').value = ''; // フォームをリセット
                } else {
                    alert('返信の送信に失敗しました。');
                }
            })
            .catch(error => console.error('Error:', error));
        });
    });
});

</script>
</head>
<body>


   

    <div class="main-content">
        <div class="header"><a class="tii">SNS デモ  </a>
               <a class="logout"  onclick="window.location.href='/accounts/logout/';">ログアウト</a>

               <a class = "username">
               {{request.user.username}}さん 
               </a>
             </div>





  

    
    </div> 






    <div class="sidebar">
        <div class="channel"># TOP</div>
        <div class="channel"># フォローの投稿</div>
        <div class="channel"># 創作総合</div>     
        <div class="channel">&nbsp;&nbsp;&nbsp;&nbsp;イラスト</div>        
        <div class="channel">&nbsp;&nbsp;&nbsp;&nbsp;DTM</div>    
        <div class="channel">&nbsp;&nbsp;&nbsp;&nbsp;その他</div>    
        <div class="channel"># 言語総合</div>
        <div class="channel"># ゲーマー</div>

        <div class="channel"># ランダム表示</div>
    </div>


    <div class="left-side">
        <div class="channel">Your Guild</div>
        <div class="channel">@開発者サバ</div>
        <div class="channel">@言語総合</div>     
        <div class="channel">@嫌儲鯖</div>
        <div class="channel">@運営鯖</div>
        <div class="channel"  onclick="window.location.href='https://google.com';">@FPS鯖</a></div>

        <div class="channel">+ Add New Guild</div>
    </div>
    <div class="buzz">  

        <div class="buzzTx">バズってる</div>
        <div class="buzzTx">Music:</div>
        <div class="buzzTx">HardBassJinja &nbsp;&nbsp;▶</div>
        <div class="buzzTx">Picture</div>
        
    </div>
    


</body>
</html>